<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--命名空间应该是对应接口的包名+接口名 -->
<mapper namespace="com.dcseat.report.dao.seat.Corporations">
    <!--id应该是接口中的方法，结果类型如没有配置别名则应该使用全名称 -->
    <select id="getCorpBounty" resultType="com.dcseat.report.base.CorporationInfo">
        SELECT
            cwj.corporation_id AS id,
            IFNULL(sum(IFNULL( cwj.tax, 0 )), 0) AS corpTax
        FROM
            corporation_wallet_journals cwj
        WHERE
            cwj.corporation_id in
            <foreach collection="list" item="item" index="index" open="(" close=")" separator="," >
                #{item.id}
            </foreach>
            AND cwj.ref_type = 'bounty_prizes'
            AND date( cwj.date ) >= STR_TO_DATE('2020-10-1', '%Y-%m-%d')
            AND date(cwj.date) &lt; date_add(STR_TO_DATE('2020-10-1', '%Y-%m-%d'), interval 1 month)
            GROUP BY cwj.corporation_id
    </select>

</mapper>